(this["webpackJsonpproduct-grid"]=this["webpackJsonpproduct-grid"]||[]).push([[4],{64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(65),l=a(66),s=a(1),o=Object(s.f)((function(e){var t=e.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{expand:"lg",fixed:"top",className:"shadow pg-light pr-5 pl-5"},r.a.createElement(c.a.Brand,{href:"#home"},r.a.createElement("span",{className:"logo"},"PG):")),r.a.createElement(c.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end"},r.a.createElement(l.a,{activeKey:t.pathname},r.a.createElement(l.a.Link,{href:"/"},"Home"),r.a.createElement(l.a.Link,{href:"#"},"Product"),r.a.createElement(l.a.Link,{href:"#"},"About"),r.a.createElement(l.a.Link,{href:"#"},"Contact Us"),r.a.createElement(l.a.Link,{href:"#"},"Login/SignUp"))),r.a.createElement("div",{className:"pg-mobile__toggle"},r.a.createElement(l.a.Link,{href:"#",className:"cart"},r.a.createElement("span",{className:"cart-ind"},"0"),r.a.createElement("i",{className:"fas fa-shopping-basket"})),r.a.createElement(c.a.Toggle,{"aria-controls":"basic-navbar-nav"}))))})),u=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(o,null),r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"header-content container"},r.a.createElement("h1",null,"Welcome to (\u30ce\u30fb\u2200\u30fb)\u30ce face store"),r.a.createElement("p",null,"We sell at affordable prices, 30% off your first purchase"),r.a.createElement("img",{src:"./img/down.svg",alt:"load",className:"down"})))))},i=a(38),m=a.n(i),d=a(39);function f(e){var t,a=new Date,n=new Date(e);return a.getDate()>n.getDate()&&(t=function(e){var t=new Date,a=new Date(e),n=t.getDate()-a.getDate();return n<=7?"".concat(n,1===n?" day ago":" days ago"):a.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}(e)),a.getDate()===n.getDate()&&(t=function(e){var t=new Date,a=new Date(e),n=t.getHours()-a.getHours(),r=t.getHours()-a.getHours(),c=t.getHours()-a.getHours();return n>=1?"".concat(n,1===n?" hour ago":" hours ago"):r>0?"".concat(r,1===r?" minute ago":" minutes ago"):"".concat(c," seconds ago")}(e)),t}var g=r.a.forwardRef((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pg-card shadow",ref:t},r.a.createElement("div",{className:"ascii-face"},r.a.createElement("p",{style:{fontSize:e.size+"px"},className:"text-center face font-weight-bold"},e.face)),r.a.createElement("div",{className:"pg-card__desc"},r.a.createElement("p",null,r.a.createElement("span",null,e.size,"px")),r.a.createElement("p",{className:"font-weight-bold"},r.a.createElement("span",null,function(e){var t=(e/100).toFixed(2);return"$".concat(t)}(e.price))),r.a.createElement("p",null,r.a.createElement("span",null,f(e.date))),r.a.createElement("button",{className:"btn cart-btn"},r.a.createElement("i",{className:"fas fa-cart-plus"})," \xa0 Add To Cart"))))})),p=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{src:"./img/loader.svg",className:"img-fluid d-block mb-0 mx-auto",alt:"Product Loader while getting products"}),r.a.createElement("p",{className:"text-center"},"Loading..."))))},E=a(60),b=a(44),v=a(55),h=a(56),O=a.n(h),j=Object(n.createContext)(),w=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)("id"),o=Object(b.a)(s,2),u=o[0],i=o[1],f=Object(n.useState)(!1),g=Object(b.a)(f,2),p=g[0],h=g[1],w=Object(n.useState)(1),x=Object(b.a)(w,2),S=x[0],N=x[1],k=Object(n.useState)([]),y=Object(b.a)(k,2),D=y[0],L=y[1],F=Object(n.useState)(!1),C=Object(b.a)(F,2),H=C[0],z=C[1],P=Object(n.useState)(""),I=Object(b.a)(P,2),B=I[0],M=I[1],_=Object(n.useState)(!1),A=Object(b.a)(_,2),R=A[0],G=A[1],T=Object(n.useState)(!1),q=Object(b.a)(T,2),J=q[0],U=q[1],W=Object(n.useState)(!1),K=Object(b.a)(W,2),Y=K[0],$=K[1],Q=Object(n.useRef)(null),V=function(e,t){U(!1);var a="http://localhost:3000/api/products?_page=".concat(e,"&_limit=15&_sort=").concat(t);return fetch(a)},X=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("i am now idle"),e.prev=1,H){e.next=15;break}if(!(D.length<1)){e.next=14;break}return t=S+1,a=u,e.next=7,V(t,a);case 7:return n=e.sent,e.next=10,n.json();case 10:(r=e.sent).length>0?(L(r),N(t),G(!0)):(M("Data is empty"),G(!0)),e.next=15;break;case 14:return e.abrupt("return");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,H){e.next=10;break}return a=S+1,n=u,e.next=5,V(a,n);case 5:return r=e.sent,e.next=8,r.json();case 8:(c=e.sent).length>0?(l((function(e){return O.a.uniqBy([].concat(Object(E.a)(e),Object(E.a)(c)),"id")})),N(a),t(!1),U(!0)):(z(!0),t(!1));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(j.Provider,{value:{products:c,setProducts:l,setLoading:h,sort:u,setSort:i,setPage:N,loading:p,addNewDataOnScroll:function(e){!0===R?function(e){D.length>=1?(l((function(e){return O.a.uniqBy([].concat(Object(E.a)(e),Object(E.a)(D)),"id")})),L([]),G(!1),U(!0),e(!1)):"Data is empty"===B&&(z(!0),G(!1),e(!1))}(e):Z(e)},catalogueEnd:H,setCatalogueEnd:z,advertStatus:J,setAdvertStatus:U,fetchData:V,page:S,setDataOnIdle:L,scrollStatus:Y,setScrollStatus:$,datafetchedOnIdle:R,setDataFetchedOnIdle:G}},r.a.createElement(v.a,{ref:Q,onIdle:X,timeout:5e3},e.children))},x=function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!1),s=Object(b.a)(l,2),o=s[0],u=s[1];Object(n.useEffect)((function(){r&&e()}),[r]);return{loadMoreFetching:r,setLoadMoreFetching:c,productLoaded:o,setproductLoaded:u,handleScroll:function(e,t){if(e){var a=document.body.offsetHeight;if(!(window.innerHeight+window.scrollY>=a))return;document.getElementsByClassName("pg-card")&&c(!t)}}}},S=a(63),N=function(e){var t=Object(n.useContext)(j).sort;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-wrap justify-content-between mt-5","data-aos":"fade-up"},r.a.createElement("h2",null,"Products"),r.a.createElement("div",null,r.a.createElement(S.a.Group,{controlId:"sort-data",className:"d-flex"},r.a.createElement(S.a.Label,{className:"mr-3 mt-2"},"Sort"),r.a.createElement(S.a.Control,{onChange:e.changeEvent,as:"select",value:t},r.a.createElement("option",{value:"size"},"size"),r.a.createElement("option",{value:"price"},"price"),r.a.createElement("option",{value:"id"},"id"))))))},k=function(e){var t=Object(n.useContext)(j),a=t.loading,c=t.setLoading,l=t.products,s=t.setProducts,o=t.addNewDataOnScroll,u=t.catalogueEnd,i=t.setCatalogueEnd,f=t.advertStatus,E=t.setAdvertStatus,b=t.sort,v=t.page,h=t.fetchData,O=t.setSort,w=t.setDataOnIdle,S=t.setPage,k=t.scrollStatus,y=t.setScrollStatus,D=(t.datafetchedOnIdle,t.setDataFetchedOnIdle),L=x((function(){o(C)})),F=L.loadMoreFetching,C=L.setLoadMoreFetching,H=L.handleScroll,z=Object(n.useRef)(),P=Object(n.useRef)(),I=function(){H(k,u)};Object(n.useEffect)((function(){return window.addEventListener("scroll",I),function(){return window.removeEventListener("scroll",I)}}),[k]),Object(n.useLayoutEffect)((function(){f&&function(){var e='<div class="pg-card ad"><p>But first, a word from our sponsors:</p><img class="adimg" src="http://localhost:3000/ads/?r='.concat(Math.floor(1e3*Math.random()),'"/></div>'),t=Array.from(document.getElementsByClassName("pg-card"));if(t.length>0)for(var a=t.length/20,n=function(a){0!==a&&t.forEach((function(t,n,r){r[n]===r[20*a-1]&&(t.nextSibling.classList.contains("ad")||t.insertAdjacentHTML("afterend",e))}))},r=0;r<a;r++)n(r)}()}),[f]);Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!1),c(!0),E(!1),e.next=6,h(v,b);case 6:return t=e.sent,e.next=9,t.json();case 9:a=e.sent,s(a),c(!1),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","Something went wrong");case 18:y(!0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[b]);var B=r.a.createElement(p,null),M=r.a.createElement("div",{className:"d-flex        flex-wrap justify-content-start",ref:P,id:"pg-wrapcard"},l.map((function(e,t){return t===l.length-1?r.a.createElement(g,{key:e.id,face:e.face,size:e.size,price:e.price,date:e.date,ref:z}):r.a.createElement(g,{key:e.id,face:e.face,size:e.size,price:e.price,date:e.date})})));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pg-sort"},r.a.createElement(N,{changeEvent:function(e){O(e.target.value),S(1),s([]),i(!1),w([]),D(!1),C(!1),E(!1),y(!1)}})),r.a.createElement("div",null,a?B:M),r.a.createElement("div",null,F&&!u&&r.a.createElement("div",{className:"pt-4 d-block mx-auto pl-4"},"Loading ",r.a.createElement("img",{src:"./img/more.svg",alt:"load more loader"}))),r.a.createElement("p",{className:"text-center"},u&&"End of Catalogue"))},y=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{id:"main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(k,null)))))},D=a(58),L=a.n(D),F=(a(59),a(13));t.default=function(e){return Object(n.useEffect)((function(){L.a.init({once:!0})}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null,r.a.createElement(F.b,{to:"#main",className:"skip"},"skip to content"),r.a.createElement(u,null),r.a.createElement(y,null)))}}}]);
//# sourceMappingURL=4.ea915675.chunk.js.map